--@V:\lab1_init.sql
--@v:\utlxplan.sql
--SET PAGESIZE 200
--SET LINESIZE 200
--SET WRAP OFF

--CONN SYS/ORACLE@DB2233.WORLD AS SYSDBA
--CONN DBM449_USER/DEVRY@db2233.WORLD
--CONN GEORGE/ORACLE@DB2233.WORLD
--CONN SCOTT/LION@DB2233.WORLD

CREATE PROFILE DBM449_SCOTT_PROFILE LIMIT
	FAILED_LOGIN_ATTEMPTS 3
	CONNECT_TIME 600
	IDLE_TIME 60
	PASSWORD_LIFE_TIME 60
	PASSWORD_GRACE_TIME 3
	PASSWORD_REUSE_MAX 3
	PASSWORD_REUSE_TIME 30;

SELECT * FROM DBA_PROFILES
WHERE PROFILE='DBM449_SCOTT_PROFILE';

ALTER USER SCOTT PROFILE DBM449_SCOTT_PROFILE;

CONN SCOTT/TIGER@DB2233.WORLD
CONN SCOTT/TIER@DB2233.WORLD

ALTER USER SCOTT ACCOUNT UNLOCK;
ALTER USER SCOTT PASSWORD EXPIRE;

GRANT SELECT ON EMP TO GEORGE;

INSERT INTO PRODUCT_USER_PROFILE VALUES
	('SQL*PLUS', 'SCOTT', 'GRANT', NULL, NULL, 'DISABLED', SYSDATE, NULL);

SHUTDOWN IMMEDIATE

STARTUP PFILE = P:\db2233\oracle\admin\oracle\pfile\INITDB2233.ORA

AUDIT SESSION WHENEVER SUCCESSFUL;
AUDIT SESSION WHENEVER NOT SUCCESSFUL;

AUDIT INSERT, UPDATE, DELETE ON SCOTT.DEPT BY ACCESS WHENEVER SUCCESSFUL;

UPDATE DEPT SET LOC='MIAMI' WHERE DEPTNO=10;
INSERT INTO DEPT VALUES(50, 'LEGAL', 'HOUSTON');
DELETE DEPT WHERE DEPTNO=50;
COMMIT;

CONN SCOTT/TIER@DB2233.WORLD
CONN SYS/ORACLE@DB2233.WORLD AS SYSDBA

SELECT USERNAME, OWNER, OBJ_NAME, SQL_TEXT FROM DBA_AUDIT_OBJECT;

COLUMN USERNAME FORMAT a10
COLUMN OWNER FORMAT a10
COLUMN OBJ_NAME FORMAT A10
COLUMN SQL_TEXT FORMAT A10
